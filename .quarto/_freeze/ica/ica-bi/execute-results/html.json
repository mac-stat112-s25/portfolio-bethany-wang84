{
  "hash": "f657a091e77d25a173ea2e8b4c23d21e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Bivariate Viz\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load data\nelections <- read.csv(\"https://mac-stat.github.io/data/election_2020_county.csv\")\n\n# Check it out\nhead(elections)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  state_name state_abbr historical    county_name county_fips total_votes_20\n1    Alabama         AL        red Autauga County        1001          27770\n2    Alabama         AL        red Baldwin County        1003         109679\n3    Alabama         AL        red Barbour County        1005          10518\n4    Alabama         AL        red    Bibb County        1007           9595\n5    Alabama         AL        red  Blount County        1009          27588\n6    Alabama         AL        red Bullock County        1011           4613\n  repub_pct_20 dem_pct_20 winner_20 total_votes_16 repub_pct_16 dem_pct_16\n1        71.44      27.02     repub          24661        73.44      23.96\n2        76.17      22.41     repub          94090        77.35      19.57\n3        53.45      45.79     repub          10390        52.27      46.66\n4        78.43      20.70     repub           8748        76.97      21.42\n5        89.57       9.57     repub          25384        89.85       8.47\n6        24.84      74.70       dem           4701        24.23      75.09\n  winner_16 total_votes_12 repub_pct_12 dem_pct_12 winner_12 total_population\n1     repub          23909        72.63      26.58     repub            54907\n2     repub          84988        77.39      21.57     repub           187114\n3     repub          11459        48.34      51.25       dem            27321\n4     repub           8391        73.07      26.22     repub            22754\n5     repub          23980        86.49      12.35     repub            57623\n6       dem           5318        23.51      76.31       dem            10746\n  percent_white percent_black percent_asian percent_hispanic per_capita_income\n1            76            18             1                2             24571\n2            83             9             1                4             26766\n3            46            46             0                5             16829\n4            75            22             0                2             17427\n5            88             1             0                8             20730\n6            22            71             0                6             18628\n  median_rent median_age\n1         668       37.5\n2         693       41.5\n3         382       38.3\n4         351       39.4\n5         403       39.6\n6         276       39.6\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\n# Exercise 0a: Percent of counties won by Republicans in 2020\nprop_repub_2020 <- mean(elections$winner_20 == \"repub\")\nprop_repub_2020  # ~ proportion of counties won by the GOP\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.8275973\n```\n\n\n:::\n\n```{.r .cell-code}\n# Plot the 2020 winner distribution\nggplot(elections, aes(x = winner_20)) +\n  geom_bar(fill = c(\"red\", \"blue\")) +\n  labs(x = \"2020 Winner\", y = \"Number of Counties\")\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Shows counts of counties won by each party\n# • Follow-up: which regions drove this split?\n\n# Exercise 0b: Distribution of Republican vote share in 2020\nggplot(elections, aes(x = repub_pct_20)) +\n  geom_histogram(color = \"white\", bins = 30) +\n  labs(x = \"Republican Vote % (2020)\", y = \"County Count\")\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Slight left skew: more counties with >50% Republican support\n# • Follow-up: which demographics correlate with high GOP support?\n\n# Exercise 1: Scatter of repub_pct_20 vs repub_pct_16\nggplot(elections, aes(x = repub_pct_16, y = repub_pct_20)) +\n  geom_point() +\n  labs(x = \"GOP % in 2016\", y = \"GOP % in 2020\")\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Data frame + mapping; geom_point draws the dots\n\n# Exercise 2: Customize scatter glyphs and labels\nggplot(elections, aes(x = repub_pct_16, y = repub_pct_20)) +\n  geom_point(shape = 3, color = \"orange\")\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-4.png){width=672}\n:::\n\n```{.r .cell-code}\n# • shape=3 changes the symbol to a plus; color sets point color\n\nggplot(elections, aes(x = repub_pct_16, y = repub_pct_20, label = state_abbr)) +\n  geom_text(size = 2)\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-5.png){width=672}\n:::\n\n```{.r .cell-code}\n# • geom_text labels each point with its state abbreviation\n\n# Exercise 3: Relationship summary\n# • Strong, positive linear trend\n# • Counties with higher 2016 GOP % tend to have higher 2020 GOP %\n# • Outliers often in swing states (e.g., some WI/MI counties deviated)\n\n# Exercise 4a: Smooth trend only\nggplot(elections, aes(x = repub_pct_16, y = repub_pct_20)) +\n  geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-6.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Local smoothing line without points\n\n# Exercise 4b: Linear model fit\nggplot(elections, aes(x = repub_pct_16, y = repub_pct_20)) +\n  geom_smooth(method = \"lm\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-7.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Best-fit straight line (linear regression)\n\n# Exercise 5: GOP % vs median_rent and median_age\nggplot(elections, aes(x = median_rent, y = repub_pct_20)) +\n  geom_point() + geom_smooth(method = \"lm\") +\n  labs(x = \"Median Rent\", y = \"GOP % (2020)\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-8.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Moderately negative slope: higher rent → slightly less GOP support\n\nggplot(elections, aes(x = median_age, y = repub_pct_20)) +\n  geom_point() + geom_smooth(method = \"lm\") +\n  labs(x = \"Median Age\", y = \"GOP % (2020)\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-9.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Weak positive slope: older counties → slightly more GOP support\n# • median_age shows a clearer trend (steeper slope) than median_rent\n\n# Exercise 6: GOP % vs historical (scatter)\nggplot(elections, aes(x = historical, y = repub_pct_20)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-10.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Overplotting makes it hard to compare distributions by category\n\n# Exercise 7: Violin and boxplots by historical category\nggplot(elections, aes(x = historical, y = repub_pct_20)) +\n  geom_violin() +\n  labs(x = \"State Trend\", y = \"GOP % (2020)\")\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-11.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Violin shows full density shape per category\n\nggplot(elections, aes(x = historical, y = repub_pct_20)) +\n  geom_boxplot() +\n  labs(x = \"State Trend\", y = \"GOP % (2020)\")\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-12.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Boxplot summarizes median, IQR, range; red > purple > blue in median GOP %\n\n# Exercise 8: Faceted density plots by historical\nggplot(elections, aes(x = repub_pct_20, fill = historical)) +\n  geom_density(alpha = 0.5) +\n  scale_fill_manual(values = c(\"red\",\"purple\",\"blue\")) +\n  facet_wrap(~ historical) +\n  labs(x = \"GOP % (2020)\", y = \"Density\")\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-13.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Faceting separates categories; alpha = 0.5 adds transparency\n\n# Exercise 9: Density with manual colors and transparency\nggplot(elections, aes(x = repub_pct_20, fill = historical)) +\n  geom_density(alpha = 0.5) +\n  scale_fill_manual(values = c(\"red\",\"purple\",\"blue\"))\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-14.png){width=672}\n:::\n\n```{.r .cell-code}\n# • scale_fill_manual assigns specific colors\n\n# Exercise 10: Reflection (no code)\n# • Favorite: boxplots for quick comparison of medians and IQRs.\n# • Pro density vs box: shows full distribution shape.\n# • Con density vs box: less precise quantile information.\n\n# Exercise 11: Categorical vs categorical (bar plots)\nggplot(elections, aes(x = historical)) + geom_bar()\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-15.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Counts of counties by state trend\n\nggplot(elections, aes(x = winner_20)) + geom_bar()\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-16.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Counts of GOP vs Dem county wins\n\n# Exercise 12: Four bar-plot types\n# Stacked\nggplot(elections, aes(x = historical, fill = winner_20)) + geom_bar()\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-17.png){width=672}\n:::\n\n```{.r .cell-code}\n# Faceted\nggplot(elections, aes(x = winner_20)) + geom_bar() + facet_wrap(~ historical)\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-18.png){width=672}\n:::\n\n```{.r .cell-code}\n# Side-by-side\nggplot(elections, aes(x = historical, fill = winner_20)) + geom_bar(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-19.png){width=672}\n:::\n\n```{.r .cell-code}\n# Proportional\nggplot(elections, aes(x = historical, fill = winner_20)) + geom_bar(position = \"fill\")\n```\n\n::: {.cell-output-display}\n![](ica-bi_files/figure-html/unnamed-chunk-2-20.png){width=672}\n:::\n\n```{.r .cell-code}\n# • Pro of proportional: compares proportions directly.\n# • Con: loses absolute count information.\n```\n:::\n\n\n\nUse this file for practice with the **bivariate viz** in-class activity.  Refer to the class website for details.\n",
    "supporting": [
      "ica-bi_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}